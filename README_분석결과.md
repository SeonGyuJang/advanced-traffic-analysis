# 세종시 버스 정류장 최적 입지 선정 - GPS 기반 정밀 분석

## 📋 프로젝트 개요

본 프로젝트는 **세종시의 실제 GPS 데이터**와 **2023년 전체 교통 데이터**를 활용하여, 신규 버스 정류장의 최적 위치를 선정하는 정밀 분석입니다.

**분석 일시**: 2025년 12월 2일
**분석 방법**: 정수계획법(Integer Programming) 기반 최적화
**데이터 규모**: 23개 행정구역, 약 7천만명 이용객 데이터

---

## 🎯 핵심 결과

### ✅ 최적화 결과

| 항목 | 결과 |
|------|------|
| **신규 정류장 수** | 5개 |
| **커버되는 지역** | 19개 / 23개 (82.6%) |
| **커버되는 수요** | 69,409,732명 / 70,195,387명 |
| **커버리지 비율** | **98.88%** |
| **목적함수 최적화** | ✅ Optimal Solution |

### 🎯 선정된 신규 정류장 위치 (우선순위 순)

| 순위 | 행정구역 | 연간 이용객 | 건물 수 | GPS 좌표 | 특징 |
|:----:|---------|----------:|-------:|---------|------|
| **1** | **조치원읍** | 11,330,610명 | 8,512개 | (36.6023, 127.2939) | 🏆 최대 수요 지역, 행정/상업 중심 |
| **2** | **나성동** | 3,506,260명 | 196개 | (36.5036, 127.2476) | 📈 높은 수요, 주거 밀집 |
| **3** | **금남면** | 1,508,687명 | 6,532개 | (36.4547, 127.2923) | 🏘️ 건물 밀집, 남부 거점 |
| **4** | **전의면** | 660,406명 | 5,217개 | (36.6693, 127.1960) | 🌾 농촌 지역, 서부 거점 |
| **5** | **전동면** | 425,519명 | 4,932개 | (36.6515, 127.2529) | 🏘️ 중간 규모, 북동부 커버 |

**총 커버 수요**: 17,431,482명 (직접 선정 지역 기준)

---

## 📊 주요 분석 내용

### 1. 실제 GPS 거리 기반 분석

- **Haversine 공식** 사용: 지구의 곡률을 고려한 정확한 거리 계산
- **23x23 거리 행렬** 생성: 모든 지역 간 실제 km 거리
- **거리 통계**:
  - 최단 거리: 0.84 km (인접 지역)
  - 최장 거리: 30.84 km (세종시 남북 끝)
  - 평균 거리: 9.88 km

### 2. 정수계획법 (Integer Programming) 최적화

#### 📐 수학적 모델

**목적 함수 (Objective Function)**:
```
Maximize: Σ (수요[i] × 복합가중치[i] × 커버여부[i])
```

**복합 가중치 산정**:
- 승하차 수요: 60%
- 건물 밀도: 25%
- 환승 수요: 15%

**제약 조건 (Constraints)**:
1. 신규 정류장 수 ≤ 5개
2. 커버리지 반경 ≤ 5 km (보행 가능 거리)
3. 각 지역은 반경 내 정류장이 있을 때만 커버됨

**솔버**: PuLP + CBC (Coin-or Branch and Cut)

#### 🎨 최적화 특징

- **다목적 최적화**: 단순 수요뿐만 아니라 건물 밀도, 환승 패턴까지 종합 고려
- **현실적 제약**: 5km 보행 거리 제한 (일반적인 정류장 접근성 기준)
- **균형잡힌 배치**: 세종시 전역을 효율적으로 커버

### 3. 시나리오 분석

다양한 정류장 수에 따른 커버리지 분석:

| 정류장 수 | 커버 지역 | 커버 수요 | 커버율 |
|:--------:|:--------:|:--------:|:------:|
| 3개 | 17개 | 68,317,155명 | 97.33% |
| 5개 | 19개 | 69,409,732명 | 98.88% |
| 7개 | 21개 | 70,080,655명 | 99.84% |
| 10개 | 23개 | 70,195,387명 | 100.00% |

**💡 인사이트**:
- 5개 정류장으로도 98.88% 커버 가능 (매우 효율적)
- 10개까지 늘려야 100% 커버 (비용 대비 효과 낮음)
- **권장**: 5~7개 정류장이 최적

---

## 📈 데이터 분석

### 데이터 소스

1. **승하차 데이터** (`지역별승하차_통합데이터.csv`)
   - 23,022건의 일별 기록 (2023년 전체)
   - 23개 행정구역
   - 승차, 하차, 환승 데이터

2. **GPS 좌표 데이터** (`행정구역_중심좌표.csv`)
   - 56,255개 건물 데이터에서 추출
   - 23개 행정구역의 정확한 위도/경도
   - 건물 밀도 정보 포함

3. **도로 데이터**
   - 속도 통계: 5,341건
   - 교통량 통계: 3,558건
   - 3,979개 도로 세그먼트

### 주요 통계

#### 📊 수요 분석

| 항목 | 값 |
|------|---:|
| 총 이용객 수 | 70,195,387명 |
| 일평균 이용객 | 약 192,318명 |
| 최대 수요 지역 | 조치원읍 (11,330,610명) |
| 최소 수요 지역 | 소정면 (30,755명) |
| 수요 편차 | 매우 큼 (368배 차이) |

#### 🏢 건물 밀도

| 구분 | 건물 수 |
|------|-------:|
| 총 건물 수 | 56,255개 |
| 최대 밀도 지역 | 조치원읍 (8,512개) |
| 최소 밀도 지역 | 반포면 (0개 - 추정치) |

#### 🔄 환승 패턴

- 총 환승 인원: 8,475,287명 (전체의 12.1%)
- 최대 환승 지역: 도담동 (1,864,716명)
- 환승이 중요한 지역: 도담동, 어진동, 대평동

---

## 🗺️ 생성된 결과물

### 1. 종합 리포트
- **파일**: `00_종합_리포트.html`
- **내용**: 모든 분석 결과를 담은 인터랙티브 HTML 리포트
- **포함 사항**: 핵심 지표, 최적화 결과, 시각화, 권장사항

### 2. 탐색적 데이터 분석
- **파일**: `01_탐색적_분석.png`
- **그래프**: 6개의 상세 분석 차트
  1. 행정구역별 총 이용객 (Top 15)
  2. 월별 이용객 추이
  3. 승차 vs 하차 관계
  4. 수요 분포 히스토그램
  5. GPS 위치 및 수요 지도
  6. 건물 수 vs 수요 상관관계

### 3. 시나리오 분석
- **파일**: `02_시나리오_분석.png`
- **그래프**: 정류장 수에 따른 커버율과 커버 수요 변화

### 4. 인터랙티브 지도
- **파일**: `03_인터랙티브_지도.html`
- **기능**:
  - 🔴 빨간 별: 신규 정류장 위치
  - 🟢 초록 체크: 커버되는 지역
  - ⚪ 회색 정보: 커버되지 않는 지역
  - 원 크기: 수요 규모
  - 클릭/호버: 상세 정보 표시

### 5. 데이터 파일

#### `최적화_결과.csv`
- 23개 지역의 상세 분석 결과
- 포함 항목:
  - 행정구역, 승하차, 환승 데이터
  - GPS 좌표, 건물 수
  - 신규 정류장 여부
  - 커버 여부
  - 최단 정류장까지 거리

#### `GPS_거리행렬.csv`
- 23x23 거리 행렬 (km 단위)
- 모든 지역 간 실제 GPS 거리

#### `시나리오_분석.csv`
- 정류장 수별 커버리지 분석 결과

---

## 💡 핵심 인사이트 및 권장사항

### ✨ 주요 발견사항

1. **매우 효율적인 커버리지**
   - 5개 정류장만으로 **98.88%** 수요 커버 가능
   - 세종시의 집중된 인구 분포 특성 반영

2. **조치원읍의 압도적 중요성**
   - 전체 수요의 **16.1%**를 차지
   - 교통 허브 역할 (환승 포함)
   - 우선 투자 필요

3. **균형잡힌 지역 분포**
   - 북부(전의면, 전동면)
   - 중부(조치원읍, 나성동)
   - 남부(금남면)
   - 세종시 전역을 효율적으로 커버

4. **커버되지 않는 지역 분석**
   - 소정면, 소담동, 반포면, 장군면 등
   - 수요가 상대적으로 낮거나 외곽 지역
   - 이동식 정류장 또는 마을버스 고려

### 🎯 단계별 구현 권장사항

#### 1단계 (최우선)
- **조치원읍** 정류장 설치
  - 최대 수요 지역
  - 즉시 11백만명+ 커버
  - ROI 가장 높음

#### 2단계 (우선)
- **나성동** + **금남면** 정류장 설치
  - 중부/남부 거점 확보
  - 추가 5백만명 커버
  - 3개 정류장으로 97% 달성

#### 3단계 (권장)
- **전의면** + **전동면** 정류장 설치
  - 북부/서부 외곽 커버
  - 98.88% 커버리지 달성
  - 세종시 전역 서비스 제공

#### 추가 고려사항
- 7~10개까지 확장 시 100% 커버 가능
- 예산 및 우선순위에 따라 결정

### ⚠️ 주의사항

1. **기존 정류장 중복 확인 필요**
   - 본 분석은 신규 정류장 가정
   - 실제 구현 전 기존 인프라 확인 필수

2. **현장 실사 필요**
   - GPS 좌표는 행정구역 중심점
   - 실제 설치 위치는 도로 접근성, 토지 소유권 고려
   - 지형, 장애물, 교통 흐름 확인

3. **시간대별 수요 분석 추가 권장**
   - 본 분석은 총량 기반
   - 출퇴근 시간대 첨두 수요 분석 필요
   - 배차 간격 및 노선 최적화에 활용

4. **동적 최적화 고려**
   - 계절별, 요일별 패턴 반영
   - 향후 인구 변화 및 도시 개발 계획 고려

---

## 🔬 기술적 상세

### 사용 기술

#### 프로그래밍 언어
- **Python 3.11**

#### 주요 라이브러리
```python
pandas (2.3.3)        # 데이터 처리
numpy (2.3.5)         # 수치 계산
matplotlib (3.10.7)   # 시각화
seaborn (0.13.2)      # 고급 시각화
geopandas (1.1.1)     # 공간 데이터 처리
pulp (3.3.0)          # 선형/정수계획법 최적화
folium (0.20.0)       # 인터랙티브 지도
```

#### 알고리즘
- **Haversine Formula**: GPS 거리 계산
- **Integer Programming (IP)**: 최적화 모델
- **MCLP (Maximal Covering Location Problem)**: 커버리지 최대화

### 성능

- **분석 시간**: 약 3초
- **메모리 사용**: < 500MB
- **최적화 시간**: < 1초 (CBC Solver)

### 재현성

```bash
# 환경 설정
pip install pandas numpy matplotlib seaborn geopandas pulp folium

# 한글 폰트 설치 (Ubuntu/Debian)
sudo apt-get install fonts-nanum fonts-nanum-coding

# 분석 실행
python3 세종시_GPS_정밀분석.py
```

---

## 📚 참고 자료

### 정수계획법 참고 문헌
- Church, R., & ReVelle, C. (1974). "The maximal covering location problem"
- Daskin, M. S. (1995). "Network and Discrete Location"
- Hakimi, S. L. (1964). "Optimum Locations of Switching Centers"

### 데이터 출처
- 세종시 교통 데이터 (2023년)
- 국토교통부 건물 데이터
- 도로명주소 안내시스템

---

## 📞 문의 및 추가 분석

추가 분석이 필요하거나 문의사항이 있으시면 아래 내용을 확인해주세요:

### 가능한 추가 분석

1. **시간대별 분석**
   - 출퇴근 시간대 수요 패턴
   - 평일/주말 차이 분석
   - 계절별 변동성

2. **노선 최적화**
   - 기존 노선과의 연계
   - 환승 편의성 향상
   - 배차 간격 최적화

3. **비용-편익 분석**
   - 건설 비용 추정
   - 예상 이용객 증가
   - ROI 계산

4. **미래 예측**
   - 인구 증가 시나리오
   - 도시 개발 계획 반영
   - 5년/10년 후 수요 예측

---

## 📄 파일 구조

```
advanced-traffic-analysis/
├── 세종시_GPS_정밀분석.py          # 메인 분석 스크립트
├── bus_station_optimization.py     # 기존 분석 스크립트
├── 정수계획법_필수데이터_분석.md    # 데이터 분석 문서
├── README_분석결과.md              # 본 문서
│
├── data/
│   ├── 지역별승하차_통합데이터.csv
│   ├── 속도통계_통합데이터.csv
│   ├── 교통량통계_통합데이터.csv
│   ├── 행정구역_중심좌표.csv        # GPS 좌표 (생성됨)
│   ├── 건물/ (shapefiles)
│   ├── 도로중심선/ (shapefiles)
│   └── 지적도/ (shapefiles)
│
├── 결과물/
│   ├── 00_종합_리포트.html
│   ├── 01_탐색적_분석.png
│   ├── 02_시나리오_분석.png
│   ├── 03_인터랙티브_지도.html
│   ├── 최적화_결과.csv
│   ├── GPS_거리행렬.csv
│   └── 시나리오_분석.csv
│
└── README.md
```

---

## ✅ 체크리스트

- [x] GPS 좌표 데이터 확보 (23개 지역)
- [x] 실제 거리 기반 분석 (Haversine)
- [x] 정수계획법 최적화 완료
- [x] 시나리오 분석 (3~10개 정류장)
- [x] 한국어 폰트 적용 시각화
- [x] 인터랙티브 지도 생성
- [x] 종합 HTML 리포트 작성
- [x] 상세 결과 데이터 저장
- [ ] 기존 정류장 위치 확인 (추가 필요)
- [ ] 시간대별 수요 데이터 (추가 필요)
- [ ] 건설 비용 데이터 (추가 필요)

---

## 🏆 결론

본 분석은 **실제 GPS 좌표**와 **정밀한 정수계획법**을 활용하여, 세종시 버스 정류장 최적 입지를 과학적으로 도출했습니다.

**핵심 결과**:
- ✅ 5개 정류장으로 98.88% 커버리지 달성 가능
- ✅ 효율적인 예산 집행 및 최대 효과
- ✅ 실제 구현 가능한 구체적 위치 제시

**다음 단계**:
1. 기존 인프라 확인
2. 현장 실사 및 타당성 검토
3. 예산 확보 및 단계별 구축 계획 수립
4. 시범 운영 및 효과 모니터링

---

**작성일**: 2025년 12월 2일
**버전**: 1.0
**분석 도구**: Python + PuLP + GPS Data
