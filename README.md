# 세종시 버스정류장 최적화 분석

## 📋 프로젝트 개요

**정수계획법(Integer Programming) 기반 세종시 버스 신규 정류장 최적 위치 선정 시스템**

본 프로젝트는 세종시의 버스 승하차 데이터(2024-2025)를 기반으로 각 정류장별 수요를 정밀 분석하고, 정수계획법 최적화 알고리즘을 통해 신규 정류장의 최적 위치를 도출합니다.

### 🎯 핵심 특징

- ✅ **정류장 중심 분석**: 동별 집계가 아닌 각 정류장의 실제 위치 기반 수요 분석
- ✅ **그리드 기반 수요 밀도**: 500m × 500m 그리드로 세종시 전체 수요 밀도 계산
- ✅ **정수계획법 최적화**: CBC Solver를 활용한 수학적 최적화
- ✅ **전문가급 시각화**: 경영진 보고용 고품질 대시보드 및 차트
- ✅ **한국어 폰트 완벽 지원**: 나눔고딕 폰트 자동 설정

## 📊 분석 결과 요약

### 주요 지표
| 구분 | 값 |
|------|-----|
| 기존 정류장 | 1,214개 |
| 수요 있는 정류장 | 23개 (1.9%) |
| 현재 커버리지 | 14.1% |
| 신규 정류장 추천 | 15개 |
| 예상 커버 수요 | 10,253명 |

### 분석 방법론

#### 1. 정류장별 수요 할당
- 각 행정구역의 승하차 데이터를 가장 가까운 정류장에 할당
- Haversine 거리 공식으로 실제 거리 계산
- 1,214개 정류장에 대한 실제 수요 추정

#### 2. 그리드 기반 수요 밀도 분석
- 세종시 전체를 500m × 500m 그리드로 분할 (총 7,144개 셀)
- 각 셀의 수요 밀도 계산 (거리 감쇠 적용)
- 수요 히트맵 생성

#### 3. 커버리지 갭 분석
- 각 그리드 셀에서 최단 정류장까지 거리 계산
- 커버리지 기준: 500m (도보 약 7분)
- 미커버 고수요 지역 식별

#### 4. 정수계획법 최적화
**목적함수**: 가중 수요 최대화
```
Maximize: Σ (demand[i] × weight[i] × covered[i])
```

**가중치**:
- 수요 (50%) + 환승 (25%) + 커버리지 갭 (25%)

**제약조건**:
- 신규 정류장 개수 ≤ 15개
- 정류장 간 최소 거리 ≥ 300m
- 커버리지 범위: 500m

**알고리즘**: PULP CBC Solver

## 🚀 사용 방법

### 1. 환경 설정

```bash
# 필수 패키지 설치
pip install pandas numpy matplotlib seaborn pulp folium plotly streamlit streamlit-folium scipy scikit-learn

# 또는 requirements.txt 사용
pip install -r requirements.txt
```

### 2. 분석 실행

```bash
# 1단계: 정밀 분석 실행
python 정밀_정류장_분석.py

# 2단계: 고품질 시각화 생성
python 고품질_시각화.py

# 3단계: 대시보드 실행
streamlit run 전문가_대시보드.py
```

### 3. 생성된 파일

#### 분석 결과
- `분석결과_정류장별수요.csv` - 각 정류장의 할당 수요
- `분석결과_수요그리드.csv` - 그리드 셀별 수요 밀도
- `분석결과_신규정류장.csv` - 신규 정류장 추천 목록
- `분석결과_보고서.json` - 종합 분석 보고서

#### 시각화
- `보고서_종합대시보드.png` - 경영진 요약 대시보드 (고해상도)
- `보고서_수요분석.png` - 상세 수요 분석 차트
- `보고서_인터랙티브지도.html` - 인터랙티브 지도 (수요 히트맵 포함)
- `보고서_3D분포.html` - 3D 분포 차트 (위도 × 경도 × 수요)
- `보고서_요약.md` - 종합 보고서 (마크다운)

## 📁 프로젝트 구조

```
advanced-traffic-analysis/
├── data/
│   ├── 세종도시교통공사_버스정류장_시설현황_20210924.csv
│   ├── 지역별승하차_통합데이터.csv
│   └── 행정구역_중심좌표.csv
├── 정밀_정류장_분석.py          # 핵심 분석 스크립트
├── 고품질_시각화.py               # 시각화 생성
├── 전문가_대시보드.py             # Streamlit 대시보드
├── requirements.txt              # 필수 패키지
├── 분석결과_*.csv                # 분석 결과 데이터
├── 보고서_*.png/html             # 시각화 결과
└── README.md                     # 본 문서
```

## 🎨 대시보드 기능

### 인터랙티브 대시보드 (Streamlit)

**주요 기능**:
1. **실시간 KPI 대시보드**
   - 기존 정류장, 커버리지, 신규 정류장, 예상 수요

2. **인터랙티브 지도**
   - 기존 정류장 (크기 = 수요)
   - 신규 추천 정류장 (우선순위 표시)
   - 커버리지 범위 시각화
   - 수요 히트맵

3. **수요 분석 탭**
   - 수요 밀도 히트맵
   - 정류장별 수요 분포
   - 커버리지 분석

4. **최적화 결과 상세**
   - 신규 정류장 추천 목록
   - 우선순위별 분석
   - 핵심 인사이트

## 📖 신규 정류장 추천 목록

| 우선순위 | 위도 | 경도 | 예상 수요 | 환승 | 커버 수요 |
|---------|------|------|----------|------|----------|
| 1 | 36.5039 | 127.3094 | 1,418명 | 115명 | 1,418명 |
| 2 | 36.4839 | 127.2763 | 1,103명 | 96명 | 1,103명 |
| 3 | 36.5239 | 127.2735 | 1,086명 | 49명 | 1,086명 |
| 4 | 36.5389 | 127.2600 | 938명 | 58명 | 938명 |
| 5 | 36.4889 | 127.2813 | 709명 | 51명 | 709명 |

*전체 15개 정류장 추천 목록은 `분석결과_신규정류장.csv` 참조*

## 🔧 설정 변경

### 커버리지 반경 조정

```python
# 정밀_정류장_분석.py 파일의 Config 클래스
class Config:
    COVERAGE_RADIUS = 0.5  # 0.5km → 원하는 값으로 변경
```

### 신규 정류장 개수 변경

```python
class Config:
    MAX_NEW_STATIONS = 15  # 15개 → 원하는 값으로 변경
```

### 가중치 조정

```python
class Config:
    WEIGHT_DEMAND = 0.50         # 수요 가중치
    WEIGHT_TRANSFER = 0.25       # 환승 가중치
    WEIGHT_COVERAGE_GAP = 0.25   # 커버리지 갭 가중치
```

## 💡 핵심 인사이트

### 분석 발견사항

1. **저활용 정류장 다수**
   - 전체 1,214개 정류장 중 23개(1.9%)만 실제 수요 보유
   - 정류장 배치 효율성 개선 여지 큼

2. **낮은 커버리지**
   - 현재 커버리지 14.1%
   - 대부분 지역이 정류장 접근 범위 밖

3. **지역 편중**
   - 특정 정류장에 수요 집중 (최대 7,595,987명)
   - 신규 정류장으로 수요 분산 필요

### 권장 사항

#### 단기 (1-3개월)
- 우선순위 1-5번 정류장 현장 조사
- 실제 도로 및 토지 여건 확인
- 예산 및 공사 난이도 평가

#### 중기 (3-6개월)
- 1단계 설치 (우선순위 1-3번)
- 설치 후 이용 현황 모니터링
- 효과 분석 및 피드백

#### 장기 (6-12개월)
- 2단계 설치 (우선순위 4-10번)
- 지속적 모니터링 및 최적화
- 분기별 수요 패턴 재분석

## 🔍 기술 스택

- **언어**: Python 3.8+
- **최적화**: PuLP (CBC Solver)
- **데이터 분석**: Pandas, NumPy, SciPy
- **시각화**: Matplotlib, Seaborn, Plotly, Folium
- **대시보드**: Streamlit
- **기계학습**: Scikit-learn (DBSCAN 클러스터링)

## 📝 라이선스

MIT License

## 👥 기여

이 프로젝트는 세종시 교통 데이터를 기반으로 개발되었습니다.

## 📧 문의

Advanced Traffic Analysis Team

---

**최종 업데이트**: 2025-12-11
**버전**: 2.0.0 (정류장 중심 정밀 분석)
